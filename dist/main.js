!function(e){var t={};function o(n){if(t[n])return t[n].exports;var a=t[n]={i:n,l:!1,exports:{}};return e[n].call(a.exports,a,a.exports,o),a.l=!0,a.exports}o.m=e,o.c=t,o.d=function(e,t,n){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)o.d(n,a,function(t){return e[t]}.bind(null,a));return n},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="",o(o.s=0)}([function(e,t){firebase.initializeApp({apiKey:"AIzaSyDE9O_Vdf00nik85EupWYgHorTDKgmqmes",authDomain:"my-library-project-8cc42.firebaseapp.com",databaseURL:"https://my-library-project-8cc42.firebaseio.com",projectId:"my-library-project-8cc42",storageBucket:"my-library-project-8cc42.appspot.com",messagingSenderId:"600577021676",appId:"1:600577021676:web:b3f907c0d0d51aad43b7c9",measurementId:"G-PGBPKN3WHY"});const o=firebase.database().ref();function n(){this.addBookToStore=()=>{const e=document.getElementById("addBookListBtn");(new i).toggleReadCheckBox("read","read-text"),e.addEventListener("click",e=>{const t=document.querySelectorAll("#addBookListForm .form-control"),n={};Array.from(t).forEach(e=>{const t=e.getAttribute("data-key");let o="";o="read"===t?e.checked:"book_image"===t?document.getElementById("book-image").files:document.getElementById(e.id).value,n[t]=o});const r=Object.values(n).filter(e=>""===e||void 0===e),d=Object.keys(n).filter(e=>""===n[e]||void 0===n[e]);if(d.length>=1)for(let e=0;e<r.length;e+=1){const t=d[e],o=document.getElementById(`msg-${t}`);(new i).formErrorMsg(o,'<small id="error-msg">Required Field</small>',"error-msg")}else{const e=document.getElementById("book-image").files[0],t=firebase.storage().ref().child(e.name).put(e);t.on("state_changed",e=>{const t=e.bytesTransferred/e.totalBytes*100;document.querySelector(".gif-loader").style.display="flex",document.querySelector(".upload-percent").innerText=`${parseInt(t)}%...`},e=>{console.log(e.message)},()=>{t.snapshot.ref.getDownloadURL().then(e=>{const t=new a;n.book_image=e,n.votes=0,n.reviewers="0",n.created_at=t.getDate(),o.child("addbook").push(n,()=>{location.reload(),(new s).changePage("discover")})})})}e.preventDefault()})},this.editBookList=()=>{document.getElementById("editBookListBtn").addEventListener("click",e=>{const t=document.querySelector("#edit-book-usid").value,n=o.child(`addbook/${t}`),a=document.querySelectorAll("#editBookListForm .form-control"),i={},s=document.querySelector("#edit-book-image").files[0];if(a.forEach(e=>{const t=e.getAttribute("data-key"),{value:o}=e;i[t]="read"===t?e.checked:"book_image"===t?document.querySelector(".edit-book-cover").getAttribute("src"):o}),void 0!==s){const e=firebase.storage().ref().child(s.name).put(s);e.on("state_changed",e=>{},e=>{},()=>{e.snapshot.ref.getDownloadURL().then(e=>{i.book_image=e,n.update(i,()=>{location.reload()})})})}else n.update(i,()=>{location.reload()});console.log(i),e.preventDefault()})},this.getAllBooksFromStore=e=>{const t=[];return e.forEach(e=>{const o=e.key,n=e.val();n.uid=o,t.push(n)}),t},this.addAllBooksToDOM=e=>{firebase.database().ref("addbook").once("value",t=>{const o=document.querySelector(".all-books .content"),s=document.querySelector("#managed-books .content"),r=new n,d=r.getAllBooksFromStore(t),c=r.getAllBooksFromStore(t);d.sort(e);const l=firebase.auth().currentUser;let u,m,g;null!==l?firebase.database().ref(`users/${l.uid}`).once("value",e=>{e.forEach(e=>{const t=e.val(),n=new a;u=t.favouriteBooks,m=t.bookmarkBooks,g=t.readBooks;let l="";d.forEach(e=>{let t,o;t=u.split(",").indexOf(e.uid)>=0?"fas fa-heart liked-reads":"far fa-heart unliked-reads",o=m.split(",").indexOf(e.uid)>=0?"fas fa-bookmark booked-reads":"far fa-bookmark unbooked-reads",l+=`<div class="item text-center ${e.genre}" data-category="${e.genre}">\n                <div class="item-image">\n                  <img class="img"\n                    src="${e.book_image}"\n                    alt="${e.title}">\n\n                  <div class="like-icons">\n                    <i class="${t} favourite-icon" id="like-icon-${e.uid}" data-like="${e.uid}"></i>\n                    <i class="${o} bookmark-icon" id="bookmark-icon-${e.uid}" data-bookmark="${e.uid}"></i>\n                    ${e.genre}\n                  </div>\n                  \n                  <div class="book-icons">\n                    <span class="icons review-icon" id="review-icon-${e.uid}" data-review="${e.uid}">Reviews</span>\n                    <span class="icons read-button" id="read-button-${e.uid}" data-toggle="modal" data-target="#bookModal" data-id="${e.uid}">Read</span>\n                  </div>\n                </div>\n                <div class="info mt-1">\n                  <h5>${n.stringLength(e.title,20)}</h5>\n                  <p>By ${e.author}</p>\n                </div>\n                </div>`}),o.innerHTML=l,c.forEach(e=>{const t=document.createElement("div");let o,n,a;g.split(",").indexOf(e.uid)>=0?(o="cover cover-hover",n='<i class="fas fa-check"></i>',a="Read"):(o="cover cover-unhover",n="",a="Unread"),t.classList="managed-content text-center",t.innerHTML=`\n                      <div class= "position-relative">\n                      <img class="img-fluid cover-img"\n                        src="${e.book_image}"\n                        alt="book-cover" />\n                      <div class="hovered-content">\n                        <div class="${o} read-icon" id="read-book-${e.uid}" data-read="${e.uid}"> ${a} ${n}</div>\n                      </div>\n                  </div >\n                        <div class="managed-icons">\n                          <i class="fas fa-edit color-primary edit-icon" data-toggle="modal" data-target="#editBookModalLong" data-id="${e.uid}"></i>\n                          <i class="fas fa-times-circle text-danger delete-icon" data-delete="${e.uid}" id="delete-book-${e.id}"></i>\n                        </div>\n                        <h5>${e.title}</h5>`,s.appendChild(t)}),(new i).toggleReadBtn(),r.showEditBookModal(),r.deleteBook(),r.showReadBookModal(d)})}):(u="",m="",g="")})},this.addBookmarkToDom=(e,t)=>{firebase.database().ref("addbook").once("value",o=>{const i=new n,s=i.getAllBooksFromStore(o),r=void 0===t?"":t.split(",");let d="";const c=new a;s.filter(e=>r.includes(e.uid)).forEach(e=>{d+=`<div class="item">\n          <img class="img-fluid"\n            src="${e.book_image}"\n            alt="book-cover" />\n          <div class="info">\n            <div class="row no-gutters">\n              <div class="col-5"></div>\n              <div class="col-7 px-3 mt-3">\n                <h5 class="title">${e.title}</h5>\n                <span>By ${e.author}</span>\n                <p class="mt-2">${c.stringLength(e.description,65)}</p>\n                <a href="${e.booklink}" class="button">See the book</a>\n              </div>\n            </div>\n\n          </div>\n        </div>`}),document.querySelector(e).innerHTML=d,i.showReviewWhenClicked(s)})},this.checkFavouriteBooks=()=>{firebase.database().ref("addbook").once("value",()=>{const e=firebase.auth().currentUser;let t,a;null!==e?firebase.database().ref(`users/${e.uid}`).once("value",i=>{i.forEach(i=>{const s=i.val(),{key:r}=i;t=s.favouriteBooks,a=s.bookmarkBooks;const d=new n;d.addBookmarkToDom("#favourite-books",t),d.addBookmarkToDom("#bookmarked-books",a);const c=t.split(","),l=a.split(",");document.addEventListener("click",n=>{if(n.target.classList.contains("favourite-icon")){const{id:a}=n.target,i=document.querySelector(`#${a}`),s=i.getAttribute("data-like");i.classList.contains("unliked-reads")?(i.classList.add("liked-reads","fas"),i.classList.remove("unliked-reads","far"),c.push(s)):i.classList.contains("liked-reads")&&(i.classList.add("unliked-reads","far"),i.classList.remove("liked-reads","fas"),c.splice(c.indexOf(s),1)),t=c.join(","),o.child(`users/${e.uid}/${r}`).update({favouriteBooks:t}),d.addBookmarkToDom("#favourite-books",t)}}),document.addEventListener("click",t=>{if(t.target.classList.contains("bookmark-icon")){const{id:n}=t.target,i=document.querySelector(`#${n}`),s=i.getAttribute("data-bookmark");i.classList.contains("unbooked-reads")?(i.classList.add("booked-reads","fas"),i.classList.remove("unbooked-reads","far"),l.push(s)):i.classList.contains("booked-reads")&&(i.classList.add("unbooked-reads","far"),i.classList.remove("booked-reads","fas"),l.splice(l.indexOf(s),1)),a=l.join(","),o.child(`users/${e.uid}/${r}`).update({bookmarkBooks:a}),d.addBookmarkToDom("#bookmarked-books",a)}})})}):(t="",a="")})},this.showReadBookModal=e=>{document.querySelectorAll(".read-button").forEach(t=>{const{id:o}=t;document.querySelector(`#${o}`).addEventListener("click",()=>{const t=document.querySelector(`#${o}`).getAttribute("data-id"),n=e.filter(e=>e.uid===t);firebase.database().ref("addreview").orderByChild("review_id").equalTo(t).on("value",e=>{let t;if(null==e.val())t="0 vote";else{const o=Object.values(e.val()).map(e=>e.review_star).reduce((e,t)=>parseInt(e,10)+parseInt(t,10));t=1===o?"1 vote":`${o} votes`}const o=new a;document.querySelector(".modal .modal-body .content").innerHTML=`\n                  <div class="row no-gutters m-0">\n                    <div class="col-8 m-auto m-md-0 col-md-6 p-0">\n                      <div class="image h-100">\n                        <img\n                          src="${n[0].book_image}"\n                          alt="${n[0].title}">\n                </div>\n                      </div>\n                      <div class="col-12 col-md-6">\n                        <div class="info text-center">\n                          <h6>${n[0].title}</h6>\n                          <div class="d-flex justify-content-around">\n                            <p>\n                              <span class="fas fa-star modal-star-checked"></span>\n                              <span>${t}</span>\n                            </p>\n                            <p>${n[0].num} pages</p>\n                          </div>\n                          <div class="mb-4">\n                            <a href="${n[0].booklink}" class="button">Read the book</a>\n                          </div>\n\n                          <p>${o.stringLength(n[0].description,300)}</p>\n                        </div>\n                      </div>\n                    </div>`})})})},this.showEditBookModal=()=>{document.addEventListener("click",e=>{if(e.target.classList.contains("edit-icon")){const t=e.target.getAttribute("data-id"),n=o.child(`addbook/${t}`);document.querySelector("#hidden-field").innerHTML=`<input type="hidden" value="${t}" id="edit-book-usid">`;const a=document.querySelectorAll("#editBookListForm .form-control");n.on("value",e=>{for(let t=0,o=a.length;t<o;t+=1)if("read"===a[t].getAttribute("data-key")){const o=a[t].getAttribute("data-key");a[t].checked=e.val()[o],(new i).toggleEditReadCheckBox()}else if("book_image"===a[t].getAttribute("data-key")){const o=a[t].getAttribute("data-key");document.querySelector("#edit-display-img").innerHTML=`<img src = "${e.val()[o]}" class="edit-book-cover">`}else{const o=a[t].getAttribute("data-key");a[t].value=e.val()[o]}})}})},this.showReviewWhenClicked=e=>{document.querySelectorAll(".review-icon").forEach(t=>{const{id:o}=t;document.querySelector(`#${o}`).addEventListener("click",()=>{const t=document.querySelector(`#${o}`).getAttribute("data-review"),n=(new s).setReviewId(t);firebase.database().ref(`addbook/${n}`).once("value",e=>{let t=e.val().reviewers;t=t.split(",");const o=firebase.auth().currentUser;null!=o&&(t.includes(o.uid)?document.querySelector(".read-review").innerHTML='<h5 class="text-white text-center">You have already have a review for this book!</h5>':document.querySelector(".read-review").innerHTML='<div class="row no-gutters align-items-end">\n              <div class="col-10">\n                <div class="star-rating mb-2">\n                  <p class="text-white mb-0">Rate Book</p>\n                  <span class="fa fa-star checked star-icon" id="rate-1" rate-id="1"></span>\n                  <span class="fa fa-star star-icon" id="rate-2" rate-id="2"></span>\n                  <span class="fa fa-star star-icon" id="rate-3" rate-id="3"></span>\n                  <span class="fa fa-star star-icon" id="rate-4" rate-id="4"></span>\n                  <span class="fa fa-star star-icon" id="rate-5" rate-id="5"></span>\n                </div>\n\n                <input type="text" id="review-title" class="review-input w-100 mb-3" placeholder="Review Title">\n                <textarea class="review-input scroll-bar w-100" id="review-comment"\n                  placeholder="Write a review"></textarea>\n              </div>\n              <div class="col-2">\n                <button type="submit" class="review-btn" id="add-review-btn">\n                  <i class="fa fa-paper-plane fa-2x ml-3"></i>\n                </button>\n              </div>\n            </div>')});const a=e.filter(e=>e.uid===n);document.querySelector(".book-reviewed-title").innerText=a[0].title,document.querySelector(".review-content .hidden-id").innerHTML=`<input type="hidden" value="${n}" id="review-id">`,firebase.database().ref("addreview").once("value",e=>{const t=[];e.forEach(e=>{const o=e.val();t.push(o)}),(new i).populateReview(t)})});const n=window.localStorage.getItem("review_id"),a=e.filter(e=>e.uid===n);document.querySelector(".book-reviewed-title").innerText=a[0].title,document.querySelector(".review-content .hidden-id").innerHTML=`<input type="hidden" value="${n}" id="review-id">`,firebase.database().ref(`addbook/${n}`).once("value",e=>{let t=e.val().reviewers;t=t.split(",");const o=firebase.auth().currentUser;null!=o&&t.includes(o.uid)&&(document.querySelector(".read-review").innerHTML='<h5 class="text-center text-white">You already have a review for this book!</h5>')})})},this.deleteBook=()=>{document.querySelectorAll(".delete-icon").forEach(e=>{const{id:t}=e;document.getElementById(`${t}`).addEventListener("click",()=>{if(confirm("Are you sure you want to delete this book?")){this.parentElement.parentElement.remove();const e=this.getAttribute("data-delete");o.child(`addbook/${e}`).remove()}})})}}function a(){this.getDate=()=>{const e=new Date;return`${`${e.getFullYear()}-${e.getMonth()+1}-${e.getDate()}`} ${`${e.getHours()}:${e.getMinutes()}:${e.getSeconds()}`}`},this.stringLength=(e,t)=>e.length>t?`${e.slice(0,t)}...`:e}function i(){this.hideDisplayContent=(e,t)=>{document.getElementById(e).style.display="block",document.getElementById(t).style.display="none"},this.showAuthForm=()=>{const e=document.querySelector("#link-to-sign-in"),t=document.querySelector("#link-to-sign-up");e.addEventListener("click",()=>{this.hideDisplayContent("login-in-form","sign-up-form")}),t.addEventListener("click",()=>{this.hideDisplayContent("sign-up-form","login-in-form")})},this.displayViewContent=(e,t)=>{const o=[],n=Array.from(document.querySelectorAll(e));for(let e=0;e<n.length;e+=1)if("list-item-link get-link"===n[e].className){const t=n[e].getAttribute("data-target");o.push(t)}o.splice(o.indexOf(t),1),o.forEach(e=>{const o=null==e?"top-books":e;this.hideDisplayContent(t,o)})},this.formErrorMsg=(e,t,o)=>{e.innerHTML=t,setTimeout(()=>{document.getElementById(o).remove()},3e3)},this.populateReview=e=>{const t=e.filter(e=>e.review_id===window.localStorage.getItem("review_id"));if(t.length>0){let e="";t.forEach(t=>{let o="";for(let e=1;e<=5;e+=1)e<=t.review_star?o+='<span class="fa fa-star star check"></span>':o+='<span class="fa fa-star star uncheck"></span>';e+=`\n            <div class= "reviewed-comment list-group-item text-dark">\n              <div class="d-flex">\n                <div class="user-profile">\n                  <img class="rounded-circle" src="${t.user_photo}" alt="${t.user_name.toLowerCase()}">\n                </div>\n                <div class="review-info">\n                  <strong><em>@${t.user_name.toLowerCase()}</em></strong>\n                  <div class="stars">\n                    ${o}\n                  </div>\n                  <h6>${t.review_title}</h6>\n                  <p>${t.review_comment}</p>\n                </div>\n              </div>\n            </div>`}),document.querySelector("#review-container").innerHTML=e}else document.querySelector("#review-container").innerHTML='<h6 class="text-center mt-3">No reviews</h6>'},this.addReviewToStore=()=>{document.getElementById("add-review-btn").addEventListener("click",e=>{const t={},n=document.querySelector("#review-comment").value,a=document.querySelector("#review-title").value,s=document.querySelector("#review-id").value,r=document.querySelectorAll(".star-icon.checked").length;firebase.auth().onAuthStateChanged(e=>{const d=e?e.displayName:"",c=e?e.photoURL:"";t.review_comment=n,t.review_title=a,t.review_id=s,t.review_star=r.toString(),t.user_name=d,t.user_photo=c;const l=o.child("addreview"),u=o.child(`addbook/${s}`);""!==n&&""!==a&&l.push(t,()=>{firebase.database().ref(`addbook/${s}`).once("value",e=>{let t=e.val().votes;const o=e.val().reviewers.split(","),n=firebase.auth().currentUser;null!=n&&(t+=r,o.push(n.uid),u.update({votes:t,reviewers:o.join(",")}))}),firebase.database().ref("addreview").once("value",e=>{const t=[];e.forEach(e=>{const o=e.val();t.push(o),document.querySelector(".review-content #review-comment").value="",document.querySelector(".review-content #review-title").value="",document.querySelectorAll(".star-icon.checked").forEach(e=>{"rate-1"!==e.id&&e.classList.remove("checked")})}),(new i).populateReview(t)})})}),e.preventDefault()}),firebase.database().ref("addreview").once("value",e=>{const t=[];e.forEach(e=>{const o=e.val();t.push(o)}),(new i).populateReview(t)})},this.rateBook=()=>{function e(e,t){for(let o=1;o<=5;o+=1)o<=e?document.querySelector(`#rate-${o}`).classList.add(t):document.querySelector(`#rate-${o}`).classList.remove(t)}document.querySelectorAll(".star-icon").forEach(t=>{const{id:o}=t;document.querySelector(`#${o}`).addEventListener("mouseenter",()=>{e(document.querySelector(`#${o}`).getAttribute("rate-id"),"checked-hovered")}),document.querySelector(`#${o}`).addEventListener("click",()=>{e(document.querySelector(`#${o}`).getAttribute("rate-id"),"checked")}),document.querySelector(`#${o}`).addEventListener("mouseleave",()=>{for(let e=2;e<=5;e+=1)document.querySelector(`#rate-${e}`).classList.remove("checked-hovered")})})},this.toggleReadBtn=()=>{const e=firebase.auth().currentUser;let t;null!==e?firebase.database().ref(`users/${e.uid}`).once("value",n=>{n.forEach(n=>{const a=n.val(),{key:i}=n;t=a.readBooks;const s=t.split(",");document.addEventListener("click",n=>{if(n.target.classList.contains("read-icon")){const{id:a}=n.target,r=n.target.getAttribute("data-read"),d=document.getElementById(a),c='<i class="fas fa-check"></i>';d.classList.contains("cover-unhover")?(document.getElementById(a).classList.add("cover-hover"),document.getElementById(a).classList.remove("cover-unhover"),document.getElementById(a).innerHTML=`Read ${c}`,s.push(r)):d.classList.contains("cover-hover")&&(document.getElementById(a).classList.add("cover-unhover"),document.getElementById(a).classList.remove("cover-unhover"),document.getElementById(a).innerHTML="Unread",s.splice(s.indexOf(r),1)),t=s.join(","),o.child(`users/${e.uid}/${i}`).update({readBooks:t})}})})}):t=""},this.toggleReadCheckBox=(e,t)=>{const o=document.getElementById(e),n=document.getElementById(t);o.addEventListener("change",()=>{o.checked?(n.innerText="Read",n.classList.add("read-status"),n.classList.remove("unread-status")):(n.innerText="Unread",n.classList.remove("read-status"),n.classList.add("unread-status"))})},this.toggleEditReadCheckBox=()=>{const e=document.getElementById("edit-read"),t=document.getElementById("edit-read-text");e.checked?(t.innerText="Read",t.classList.add("read-status"),t.classList.remove("unread-status")):(t.innerText="Unread",t.classList.remove("read-status"),t.classList.add("unread-status"))},this.filterBooksByGenre=()=>{const e=document.querySelector(".filters-button-group"),t=document.querySelector(".sort-button-group"),o=document.querySelectorAll(".filters-button-group .list-group-item");e.addEventListener("click",e=>{if(e.target.classList.contains("list-group-item")){const{id:t}=e.target;Array.from(o).forEach(e=>{e.id===t?e.classList.add("active"):e.classList.remove("active")});const n=document.querySelectorAll(".all-books .content .item");Array.from(n).forEach(e=>{e.classList.contains(t)?(e.classList.remove("hide"),setTimeout(()=>{e.style.display="block"},650)):(e.classList.add("hide"),setTimeout(()=>{e.style.display="none"},650))})}}),t.addEventListener("change",()=>{const{value:e}=t;(new n).addAllBooksToDOM((function(t,o){return t[e]>o[e]?-1:t[e]<o[e]?1:0}))})}}function s(){this.getPage=()=>{null===window.localStorage.getItem("page_link")&&window.localStorage.setItem("page_link","top-books");const e=window.localStorage.getItem("page_link");(new i).displayViewContent("#app-links .get-link",e)},this.setReviewId=e=>(null===window.localStorage.getItem("review_id")?window.localStorage.setItem("review_id","no-reviews"):window.localStorage.setItem("review_id",e),window.localStorage.getItem("review_id")),this.setPage=e=>{document.getElementById(e).addEventListener("click",e=>{if("list-item-link get-link"===e.target.className){const t=e.target.getAttribute("data-target");window.localStorage.setItem("page_link",`${t}`),(new i).displayViewContent("#app-links .get-link",t)}})},this.changePage=e=>{window.localStorage.setItem("page_link",e),(new i).displayViewContent("#app-links .get-link",e)}}"add-a-book"!==window.localStorage.getItem("page_link")&&firebase.database().ref("addbook").once("value",e=>{document.querySelector(".all-books .content"),document.querySelector("#managed-books .content");let t=[];e.forEach(e=>{const o=e.key,n=e.val();n.uid=o,t.push(n)}),(new n).allBooks=t,t=t.sort((e,t)=>new Date(t.created_at).getTime()-new Date(e.created_at).getTime());let o,a='<option value="" disabled selected>Current Read</option>';t.forEach(e=>{a+=`< option value = "${e.id}" > ${e.title}</option >`}),document.querySelector("#current-read").innerHTML=a;const i=document.getElementById("current-read");i.addEventListener("change",(function(){const e=this.options[this.selectedIndex].value;o=t.filter(t=>t.id===e),document.querySelector("#currently-reading-title").innerText=`${o[0].title}`,document.querySelector("#currently-reading-author").innerText=`${o[0].author}`,document.getElementById("current-read-image").innerHTML=`< img src = "${o[0].book_image}" alt = "${o[0].title}" >`,document.getElementById("current-page").disabled=!1})),""==i.value&&(document.getElementById("current-page").disabled=!0),document.getElementById("current-page").addEventListener("keyup",(function(){const e=parseInt(this.value/parseInt(o[0].num)*100);this.value>parseInt(o[0].num)?document.querySelector(".exceed-page-msg").innerHTML='<small class="text-danger">You have exceeded book total page</small>':(document.getElementById("progress-bar-book").style.width=`${e} % `,document.getElementById("progress-percentage-info").innerText=`${e} % `,document.querySelector(".exceed-page-msg").innerHTML="")}))}),document.getElementById("toggle-review-button").addEventListener("click",()=>{document.getElementById("last-column").classList.contains("close-review")?(document.getElementById("toggle-review-button").innerHTML='<i class="fas fa-times fa-2"></i>',document.getElementById("last-column").classList.remove("close-review")):(document.getElementById("toggle-review-button").innerHTML='<i class="fas fa-bars fa-2"></i>',document.getElementById("last-column").classList.add("close-review"))});const r=new function(){this.signUp=()=>{document.getElementById("sign-up-btn").addEventListener("click",(function(){const[e,t]=[document.getElementById("email"),document.getElementById("password")];firebase.auth().createUserWithEmailAndPassword(e.value,t.value).then(()=>{const t=firebase.auth().currentUser;t.updateProfile({displayName:e.value.split("@")[0],photoURL:"https://cdn.wpbeginner.com/wp-content/uploads/2012/08/gravatarlogo.jpg"}).then(()=>{const[e,o,n,a]=[t.email,"0","0","0"],i={email:e,favouriteBooks:o,bookmarkBooks:n,readBooks:a};firebase.database().ref(`users/${t.uid}`).push(i),location.reload()}).catch(()=>{}),document.getElementById("sign-up-form-content").reset()}).catch(e=>{document.getElementById("signup-error-msg").innerText=e.message})}))},this.signOut=()=>{document.getElementById("logout-btn").addEventListener("click",(function(){firebase.auth().signOut()}))},this.signIn=()=>{document.getElementById("log-in-btn").addEventListener("click",(function(){const[e,t]=[document.getElementById("login-email"),document.getElementById("login-password")];firebase.auth().signInWithEmailAndPassword(e.value,t.value).then(()=>{document.getElementById("sign-in-form-content").reset(),location.reload()}).catch(e=>{document.getElementById("login-error-msg").innerText=e.message})}))},this.userIsSignedIn=()=>{const e=new i;firebase.auth().onAuthStateChanged(()=>{const t=firebase.auth().currentUser;null!==t?(document.querySelector(".user-profile").innerHTML=`\n            <img src="${t.photoURL}" alt="Profile Image">\n            <span class="username ml-3">${t.displayName.toUpperCase()}</span>`,e.hideDisplayContent("app-container","login-form")):e.hideDisplayContent("login-form","app-container")})}};r.signUp(),r.signOut(),r.signIn(),r.userIsSignedIn();const d=new s;d.getPage(),d.setPage("app-links");const c=new i;c.addReviewToStore(),c.rateBook(),c.showAuthForm(),c.filterBooksByGenre();const l=new n;l.addBookToStore(),l.editBookList(),l.addAllBooksToDOM((function(e,t){return new Date(t.created_at).getTime()<new Date(e.created_at).getTime()?-1:new Date(e.created_at).getTime()>new Date(t.created_at).getTime()?1:0})),l.checkFavouriteBooks(),$("#book-image").on("change",e=>{const{files:t}=e.target,o=t[0];console.log(o.size);const n=new FileReader;n.onload=function(e){const t=new Image;t.src=e.target.result,$("#display-img").html(t),$("#drop_zone").css({opacity:"0",border:"none"})},n.readAsDataURL(o),console.log(t)}),$("#edit-book-image").on("change",e=>{const{files:t}=e.target,o=t[0];console.log(o.size);const n=new FileReader;n.onload=function(e){const t=new Image;$(t).addClass("edit-book-cover"),t.src=e.target.result,$("#edit-display-img").html(t),$("#drop_zone").css({opacity:"0",border:"none"})},n.readAsDataURL(o),console.log(t)}),$(document).ready(()=>{$(".owl-carousel").owlCarousel({navText:['<i class="fas fa-chevron-left text-white"></i>','<i class="fas fa-chevron-right text-white"></i>'],loop:!0,margin:10,nav:!0,responsive:{0:{items:1},500:{items:2},900:{items:3},1e3:{items:2}}})})}]);